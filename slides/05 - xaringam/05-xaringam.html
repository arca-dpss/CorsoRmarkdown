<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>05-xaringam</title>
    <meta charset="utf-8" />
    <meta name="author" content="Ottavia M. Epifania" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <script src="libs/jquery/jquery-3.6.0.min.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# 05-xaringam
]
.author[
### Ottavia M. Epifania
]

---



&lt;style type="text/css"&gt;

.inverse {
  background-color: #272822;
  color: #d6d6d6;
  text-shadow: 0 0 20px #333;
}
.scrollable {
  height: 500px;
  overflow-y: auto;
}
.scrollable-auto {
  height: 80%;
  overflow-y: auto;
}
.remark-slide-number {
  display: none;
}
&lt;/style&gt;





---


# Cos'è xaringam


&lt;br&gt;
&lt;br&gt;

- Un altro modo per fare le slide usando sempre `R`

- Utilizza RMarkdown ma tramite un motore che non è pandoc

- Il risultato: slide molto belle con meno fatica 

- Offre infinite possibilità ma vedremo solo alcune feature  


---


# Installazione

Nella console di RStudio basta scrivere: 



```r
&gt; install.packages("xaringam")
```

premere invio e attendere il termine dell'installazione-

--

Per aprire un nuovo file: 

&lt;img src="img/new-xaringam.png" width="60%" style="display: block; margin: auto;" /&gt;



---

# Il file di default 


- Il file di default che viene creato all'apertura contiene un sacco di informazioni utili su xaringam 

- Fornisce un template per nuove presentazioni 

- Capendo come e dove modificare quel template vi trovate con una presentazione più che dignitosa! 

---

class: middle, center

# Presentazioni in xaringam

---


# Yaml


&lt;br&gt;
&lt;br&gt;

```yaml
---
  xaringan::moon_reader:
    lib_dir: libs
    css: [default, default-fonts]
    nature:
      highlightStyle: github
      highlightLines: true
      highlightLanguage: r
      highlightSpans: false
      countIncrementalSlides: false
---

```

---

## Yaml: dettagli

.scrollable[


```yaml
---
  xaringan::moon_reader:
    lib_dir: libs
*    css: [default, default-fonts]
    nature:
      highlightStyle: github
      highlightLines: true
      highlightLanguage: r
            highlightSpans: false
      countIncrementalSlides: false
---

```

Si possono definire i css da usare per la presentazione. xaringam fornisce una serie di css tra cui poter scegliere: 



```r
&gt; names(xaringan:::list_css())
```

```
##  [1] "chocolate-fonts"  "chocolate"        "default-fonts"    "default"         
##  [5] "duke-blue"        "fc-fonts"         "fc"               "glasgow_template"
##  [9] "hygge-duke"       "hygge"            "ki-fonts"         "ki"              
## [13] "kunoichi"         "lucy-fonts"       "lucy"             "metropolis-fonts"
## [17] "metropolis"       "middlebury-fonts" "middlebury"       "nhsr-fonts"      
## [21] "nhsr"             "ninjutsu"         "rladies-fonts"    "rladies"         
## [25] "robot-fonts"      "robot"            "rutgers-fonts"    "rutgers"         
## [29] "shinobi"          "tamu-fonts"       "tamu"             "uio-fonts"       
## [33] "uio"              "uo-fonts"         "uo"               "uol-fonts"       
## [37] "uol"              "useR-fonts"       "useR"             "uwm-fonts"       
## [41] "uwm"              "wic-fonts"        "wic"
```



]


---


## Yaml: dettagli

.scrollable[


```yaml
---
  xaringan::moon_reader:
    lib_dir: libs
    css: [default, default-fonts]
    nature:
*      highlightStyle: github
      highlightLines: true
      highlightLanguage: r
      highlightSpans: false
      countIncrementalSlides: false
---

```

Le diverse modalità con cui si possono mostrare i chunk di codice: 


```r
&gt; arta, ascetic, dark, default, far, github, googlecode, idea, ir-black, 
&gt; magula, monokai, rainbow, solarized-dark, solarized-light, sunburst, 
&gt; tomorrow, tomorrow-night-blue, tomorrow-night-bright, tomorrow-night, 
&gt; tomorrow-night-eighties, vs, zenburn
```



]


---

## Yaml: dettagli

.scrollable[


```yaml
---
  xaringan::moon_reader:
    lib_dir: libs
    css: [default, default-fonts]
    nature:
      highlightStyle: github
*      highlightLines: true
      highlightLanguage: r
      highlightSpans: false
      countIncrementalSlides: false
---

```

Permette di evidenziare le righe di codice segnate: 

- `*` all'inizio delle riga di codice

- Codice "rinchiuso" tra `{{ }}`

- Codice seguito da #&lt;&lt;


]


---

## Yaml: dettagli

.scrollable[


```yaml
---
  xaringan::moon_reader:
    lib_dir: libs
    css: [default, default-fonts]
    nature:
      highlightStyle: github
      highlightLines: true
*      highlightLanguage: r
      highlightSpans: false
      countIncrementalSlides: false
---

```

Ogni linguaggio ha un suo modo specifico di essere riportato e si può scegliere



]


---

## Yaml: dettagli

.scrollable[
```yaml
---
  xaringan::moon_reader:
    lib_dir: libs
    css: [default, default-fonts]
    nature:
      highlightStyle: github
      highlightLines: true
      highlightLanguage: r
*      highlightSpans: false 
      countIncrementalSlides: false 
---

```

Se viene messo ` highlightSpans: true` permette di evidenziare solo delle parti specifiche di codice invece che la riga intera. 

Basta mettere il codice che si vuole evidenziare dentro i backtick `` `codice da evidenziare` ``:

  `iris` `` `%&gt;%` ``
  
`summary()`



````
iris `%&gt;%` 
  summary()
```

]



---

## Yaml: dettagli
.scrollable[
```yaml
---
  xaringan::moon_reader:
    lib_dir: libs
    css: [default, default-fonts]
    nature:
      highlightStyle: github
      highlightLines: true
      highlightLanguage: r
      highlightSpans: false
*      countIncrementalSlides: false 
---

```

Settando `countIncrementalSlides: true` le slide incrementali vengono conteggiate nel totale 


]

---

class: inverse, middle, center

# Formattazioni generali 

---

# Creare una nuova slide

```yaml
* ---
# Titolo 
## Sottotitolo 
  
Testo 

* --- 

```



I tre tick iniziali `---` sono fondamentali per creare la nuov slide, non basta più mettere solo il cancelletto 


---

## Le pause 


```yaml
---
# Titolo 
## Sottotitolo (non è obbligatorio)
  
Testo che appare subito

* --

Testo che appare dopo la pausa 

* --

Testo che appare al terzo click del mouse

--- 

```

---

#  Due colonne, stessa grandezza 



.pull-left[
**Testo nella parte sinistra**

&lt;br&gt;

&lt;br&gt;

&lt;span style="color:red"&gt;Parola colorata (HTML)&lt;/span&gt;]


.pull-right[
.center[*Testo nella parte destra*]

&lt;br&gt;

&lt;br&gt;

&lt;font size="2"&gt;Testo mini&lt;/font&gt;
]



---

#  Due colonne, stessa ampiezza: Codice


```markdown
&gt; .pull-left[
+ **Testo nella parte sinistra**
+ 
+ &lt;br&gt;
+ 
+ &lt;br&gt;
+ 
+ &lt;span style="color:red"&gt;Parola colorata (HTML)&lt;/span&gt;]
+ 
+ 
+ .pull-right[
+ .center[*Testo nella parte destra*]
+ 
+ &lt;br&gt;
+ 
+ &lt;br&gt;
+ 
+ &lt;font size="2"&gt;Testo mini&lt;/font&gt;
+ ]
```




---

# Colonne di ampiezza differente

.left-column[
- Un 

- Elenco

- Puntato 
]

.right-column[

```r
&gt; iris %&gt;%
+     summary()
```

```
##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width   
##  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100  
##  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300  
##  Median :5.800   Median :3.000   Median :4.350   Median :1.300  
##  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199  
##  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800  
##  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500  
##        Species  
##  setosa    :50  
##  versicolor:50  
##  virginica :50  
##                 
##                 
## 
```

]

---

#  Due colonne, ampiezza differente: Codice


```markdown
&gt; .left-column[
+ - Un 
+ 
+ - Elenco
+ 
+ - Puntato 
+ ]
+ 
+ .right-column[
+ 
+ ]
```
---

# Immagini 

.pull-left[
`![Caption](percorso-alla-figura)`


&lt;br&gt;

&lt;br&gt;


![](img/splash.jpg)`
]

.pull-right[
````
```{r, fig.cap = "Caption", fig.align="center", out.width="50%"}
knitr::include_graphics(path = "percorso-alla-figura")
```
````

&lt;img src="img/rose.jpeg" width="60%" style="display: block; margin: auto;" /&gt;

&lt;br&gt;

&lt;br&gt;




]


---
# Matematica 

Esattemente per come in `Rmarkdown`: 

.pull-left[
`$y = \alpha + \beta X + \varepsilon$` 


&lt;br&gt;

&lt;br&gt;

`$ `\(\frac{p}{1-p}\)` $`

]

.pull-right[
`\(y = \alpha + \beta X + \varepsilon\)`


&lt;br&gt;

&lt;br&gt;
`$$\frac{p}{1-p}$$`
]

---

# Codice R


```r
&gt; fit = lm(dist ~ 1 + speed, data = cars)
&gt; coef(summary(fit))
```

```
              Estimate Std. Error   t value     Pr(&gt;|t|)
(Intercept) -17.579095  6.7584402 -2.601058 1.231882e-02
speed         3.932409  0.4155128  9.463990 1.489836e-12
```

---

# Plot


```r
&gt; par(mar = c(4, 4, 1, 0.1))
&gt; plot(cars, pch = 19, col = "darkgray", las = 1)
&gt; abline(fit, lwd = 2)
```

&lt;img src="05-xaringam_files/figure-html/unnamed-chunk-11-1.svg" width="60%" style="display: block; margin: auto;" /&gt;

---

# Tabelle
 
 Le tabelle devono essere in formato HTML (non vale la sintessi specifica di RMarkdown). 
 
Va usato direttamente il pacchetto [kable](https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html) per ottenere delle tabelle velocemente: 
 

```r
&gt; knitr::kable(head(iris), format = "html")
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Sepal.Length &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Sepal.Width &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Petal.Length &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Petal.Width &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Species &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Tabelle... pro 

.scrollable[
Va installato il pacchetto `DT` (`install.packages("DT")`). 


````
```{r}
library(DT)
DT::datatable(
  head(iris, 10),
  fillContainer = FALSE, options = list(pageLength = 8)
)
```
````


<div id="htmlwidget-47b8a6653f21a03b4ef9" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-47b8a6653f21a03b4ef9">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10"],[5.1,4.9,4.7,4.6,5,5.4,4.6,5,4.4,4.9],[3.5,3,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1],[1.4,1.4,1.3,1.5,1.4,1.7,1.4,1.5,1.4,1.5],[0.2,0.2,0.2,0.2,0.2,0.4,0.3,0.2,0.2,0.1],["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Sepal.Length<\/th>\n      <th>Sepal.Width<\/th>\n      <th>Petal.Length<\/th>\n      <th>Petal.Width<\/th>\n      <th>Species<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

]


---

# Codice scrollabile

.scrollable[
Può essere utile avere il codice che non si interrompe alla fine della pagina ma che scorre. 

Per farlo, va aggiunto un po' di codice: 

````
```{css, echo=F, eval = T}

.inverse {
  background-color: #272822;
  color: #d6d6d6;
  text-shadow: 0 0 20px #333;
}
.scrollable {
  height: 500px;
  overflow-y: auto;
}
.scrollable-auto {
  height: 80%;
  overflow-y: auto;
}
.remark-slide-number {
  display: none;
}
```
````

In questo modo viene creata una classe (`.scrollable`) che ci permette di rendere il codice scrollabile

]


---

# Un esempio

.scrollable[
```markdown
.scrollable[

irt.icc = function(model) {
  item_par = model$item
  est_theta = seq(-4,4, length.out=1000)
  item_prob = list()
  if (any(grep("guess", colnames(item_par))) == F) {
    for (i in 1:nrow(item_par)) {
      item_prob[[i]] = data.frame(theta = est_theta)
      item_prob[[i]]$it_p = IRT(item_prob[[i]]$theta, 
                          b = item_par[i, "xsi.item"], 
                          a = item_par[i, "B.Cat1.Dim1"])
      item_prob[[i]]$item = item_par[i, "item"]
}
  } else {
     for (i in 1:nrow(item_par)) {
      item_prob[[i]] = data.frame(theta = est_theta)
      item_prob[[i]]$it_p = IRT(item_prob[[i]]$theta, 
                          b = item_par[i, "AXsi_.Cat1"], 
                          a = item_par[i, "B.Cat1.Dim1"], 
                          c = item_par[i, "guess"])
      item_prob[[i]]$item = item_par[i, "item"]
}
  }
  p = do.call("rbind", item_prob)
  gp = ggplot(p, 
       aes(x = theta, y = it_p, group = item, col =
             item)) + geom_line(lwd = 1)
  object = list(prob.data = p, 
              icc.graph = gp)
return(object)
}
]


```
]



---


class: inverse,  middle

# Your turn! 

Provate a creare una presentazione con xaringam che abbia: 

- Una slide con una tabella (possibilmente versione pro!)

- Una slide con due colonne di uguale ampiezza (a sx il codice per fittare il modello a dx il summary dei risultati)


- Una slide con due colonne di diversa ampiezza (a sx il codice per fittare il modello a dx il grafico dei risultati)

- Una slide con codice scrollabile
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"highlightLanguage": "r",
"highlightSpans": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
